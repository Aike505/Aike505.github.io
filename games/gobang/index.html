<!DOCTYPE html><html><head><meta charset="utf-8"><title>五子棋 | TRHX'S BLOG</title><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/TRHX/CDN-for-itrhx.com@3.0.4/images/favicon.ico" type="image/x-icon"><style>canvas{display:block;margin:60px auto;box-shadow:-2px -2px 2px #efefef,5px 5px 5px #b9b9b9;cursor:pointer}.btn-wrap{display:flex;flex-direction:row;justify-content:center}.btn-wrap div{margin:0 10px}div>span{display:inline-block;padding:10px 20px;color:#fff;background-color:#6496ed;border-radius:5px;cursor:pointer}div.unable span{background:#d6d6d4;color:#adacaa}#result-wrap{text-align:center;margin:50px 0 0 0}#footer{position:relative;clear:both;padding:10px 20px 40px 0;padding:10px 0;width:100%;text-align:center}#footer address{display:inline-block;padding:2px 10px;color:rgba(0,0,0,.5);font-style:normal}#footer a{color:rgba(0,0,0,.5);cursor:grab}#footer a:hover{border-bottom:1px dotted #00387d;color:#00387d}</style></head><body ondragstart="window.event.returnValue=!1" oncontextmenu="window.event.returnValue=!1" onselectstart="event.returnValue=!1"><h3 id="result-wrap">人机五子棋对弈</h3><canvas id="chess" width="450px" height="450px"></canvas><div class="btn-wrap"><div id="restart" class="restart"><span>重新开始</span></div><div id="goback" class="goback unable"><span>悔棋</span></div><div id="return" class="return unable"><span>撤销悔棋</span></div></div><script charset="utf-8">for(var over=!1,me=!0,_nowi=0,_nowj=0,_compi=0,_compj=0,_myWin=[],_compWin=[],backAble=!1,returnAble=!1,resultTxt=document.getElementById("result-wrap"),chressBord=[],i=0;i<15;i++){chressBord[i]=[];for(var j=0;j<15;j++)chressBord[i][j]=0}var myWin=[],computerWin=[],wins=[];for(i=0;i<15;i++)for(wins[i]=[],j=0;j<15;j++)wins[i][j]=[];var count=0;for(i=0;i<15;i++)for(j=0;j<11;j++){for(var k=0;k<5;k++)wins[i][j+k][count]=!0;count++}for(i=0;i<15;i++)for(j=0;j<11;j++){for(k=0;k<5;k++)wins[j+k][i][count]=!0;count++}for(i=0;i<11;i++)for(j=0;j<11;j++){for(k=0;k<5;k++)wins[i+k][j+k][count]=!0;count++}for(i=0;i<11;i++)for(j=14;j>3;j--){for(k=0;k<5;k++)wins[i+k][j-k][count]=!0;count++}for(i=0;i<count;i++)myWin[i]=0,_myWin[i]=0,computerWin[i]=0,_compWin[i]=0;var chess=document.getElementById("chess"),context=chess.getContext("2d");context.strokeStyle="#bfbfbf";var backbtn=document.getElementById("goback"),returnbtn=document.getElementById("return");window.onload=function(){drawChessBoard()},document.getElementById("restart").onclick=function(){window.location.reload()},chess.onclick=function(o){if(!over&&me){backbtn.className=backbtn.className.replace(new RegExp("(\\s|^)unable(\\s|$)")," ");var n=o.offsetX,e=o.offsetY,t=Math.floor(n/30),r=Math.floor(e/30);if(_nowi=t,_nowj=r,0==chressBord[t][r]){oneStep(t,r,me),chressBord[t][r]=1;for(var i=0;i<count;i++)wins[t][r][i]&&(myWin[i]++,_compWin[i]=computerWin[i],computerWin[i]=6,5==myWin[i]&&(resultTxt.innerHTML="恭喜，你赢了！",over=!0));over||(me=!me,computerAI())}}},backbtn.onclick=function(o){if(backAble){over=!1,me=!0,returnbtn.className=returnbtn.className.replace(new RegExp("(\\s|^)unable(\\s|$)")," "),chressBord[_nowi][_nowj]=0,minusStep(_nowi,_nowj);for(var n=0;n<count;n++)wins[_nowi][_nowj][n]&&(myWin[n]--,computerWin[n]=_compWin[n]);for(chressBord[_compi][_compj]=0,minusStep(_compi,_compj),n=0;n<count;n++)wins[_compi][_compj][n]&&(computerWin[n]--,myWin[n]=_myWin[i]);resultTxt.innerHTML="--人机五子棋--",returnAble=!0,backAble=!1}},returnbtn.onclick=function(o){if(returnAble){chressBord[_nowi][_nowj]=1,oneStep(_nowi,_nowj,me);for(var n=0;n<count;n++)wins[_nowi][_nowj][n]&&(myWin[n]++,_compWin[n]=computerWin[n],computerWin[n]=6),5==myWin[n]&&(resultTxt.innerHTML="恭喜，你赢了！",over=!0);for(chressBord[_compi][_compj]=2,oneStep(_compi,_compj,!1),n=0;n<count;n++)wins[_compi][_compj][n]&&(computerWin[n]++,_myWin[n]=myWin[n],myWin[n]=6),5==computerWin[n]&&(resultTxt.innerHTML="很遗憾，计算机赢了，继续加油哦！",over=!0);returnbtn.className+=" unable",returnAble=!1,backAble=!0}};var computerAI=function(){for(var o=[],n=[],e=0,t=0,r=0,i=0;i<15;i++){o[i]=[],n[i]=[];for(var c=0;c<15;c++)o[i][c]=0,n[i][c]=0}for(i=0;i<15;i++)for(c=0;c<15;c++)if(0==chressBord[i][c]){for(var m=0;m<count;m++)wins[i][c][m]&&(1==myWin[m]?o[i][c]+=200:2==myWin[m]?o[i][c]+=400:3==myWin[m]?o[i][c]+=2e3:4==myWin[m]&&(o[i][c]+=1e4),1==computerWin[m]?n[i][c]+=220:2==computerWin[m]?n[i][c]+=420:3==computerWin[m]?n[i][c]+=2100:4==computerWin[m]&&(n[i][c]+=2e4));o[i][c]>e?(e=o[i][c],t=i,r=c):o[i][c]==e&&n[i][c]>n[t][r]&&(t=i,r=c),n[i][c]>e?(e=n[i][c],t=i,r=c):n[i][c]==e&&o[i][c]>o[t][r]&&(t=i,r=c)}for(_compi=t,_compj=r,oneStep(t,r,!1),chressBord[t][r]=2,m=0;m<count;m++)wins[t][r][m]&&(computerWin[m]++,_myWin[m]=myWin[m],myWin[m]=6,5==computerWin[m]&&(resultTxt.innerHTML="很遗憾，计算机赢了，继续加油哦！",over=!0));over||(me=!me),backAble=!0,returnAble=!1,new RegExp("unable").test(" "+returnbtn.className+" ")||(returnbtn.className+=" unable")},drawChessBoard=function(){for(var o=0;o<15;o++)context.moveTo(15+30*o,15),context.lineTo(15+30*o,435),context.stroke(),context.moveTo(15,15+30*o),context.lineTo(435,15+30*o),context.stroke()},oneStep=function(o,n,e){context.beginPath(),context.arc(15+30*o,15+30*n,13,0,2*Math.PI),context.closePath();var t=context.createRadialGradient(15+30*o+2,15+30*n-2,13,15+30*o+2,15+30*n-2,0);e?(t.addColorStop(0,"#0a0a0a"),t.addColorStop(1,"#636766")):(t.addColorStop(0,"#d1d1d1"),t.addColorStop(1,"#f9f9f9")),context.fillStyle=t,context.fill()},minusStep=function(o,n){context.clearRect(30*o,30*n,30,30),context.beginPath(),context.moveTo(15+30*o,30*n),context.lineTo(15+30*o,30*n+30),context.moveTo(30*o,30*n+15),context.lineTo(30*(o+1),30*n+15),context.stroke()}</script><footer id="footer" role="contentinfo" style="top:100px"><address><div class="copyright" style="font-size:13px">Copyright&nbsp;©&nbsp;2018-2019&nbsp;<a href="https://www.itrhx.com/" target="_blank">TRHX'S BLOG</a>&nbsp;|&nbsp; <img src="https://cdn.jsdelivr.net/gh/TRHX/CDN-for-itrhx.com@3.0.4/images/icp.png" class="footer-icon">&nbsp; <a href="http://www.beian.miit.gov.cn/" target="_blank">鄂ICP备19003281号-3</a>&nbsp;|&nbsp; <img src="https://cdn.jsdelivr.net/gh/TRHX/CDN-for-itrhx.com@3.0.4/images/12377.png" alt=" 12377.png"> <a href="http://www.12377.cn/" target="_blank">中国互联网违法和不良信息举报中心</a><br><br>推荐使用1920*1080分辨率、谷歌或者火狐浏览器浏览此页&nbsp;|&nbsp; <a href="https://itrhx.com/sitemap.xml" target="_blank">站点地图</a>&nbsp;|&nbsp;<script src="https://s23.cnzz.com/z_stat.php?id=1275909280&web_id=1275909280"></script>&nbsp;|&nbsp; <a href="https://www.itrhx.com/atom.xml" target="_blank">RSS订阅</a>&nbsp;|&nbsp; <a href="https://996.icu/" target="_blank">996.ICU</a>&nbsp;|&nbsp; <a href="https://www.itrhx.com/friends/" target="_blank">申请友链</a>&nbsp;|&nbsp; Powered By <a href="https://hexo.io/" target="_blank">Hexo</a>&nbsp;|&nbsp; Hosted By <a href="https://github.com/" target="_blank">GitHub Pages</a><br><br>部分资料来源于网络，版权属于其合法持有人，只供学习交流之用，非商务用途。如有侵犯您的权益，请及时告知删除。互动交流时请遵守理性，宽容，换位思考的原则。</div></address></footer></body><script>document.onkeydown=function(e){var n=e||window.event;123==(n.keyCode||n.which||n.charCode)&&(window.event.cancelBubble=!0,window.event.returnValue=!1)}</script></html>